@using TeamManager.Manual.Data
@using System.Linq
@model IList<RaceModel>
@{
    ViewBag.Title = "Races";
}

<h1>Races</h1>
@if (Model == null || Model.Count == 0)
{
    <hr />
    <h5>No races in the database.</h5>
}
else
{
    <div class="m-3">
        <table class="table">
            <tr>
                <th>Date</th>
                <th>Race name</th>
                <th>Type</th>
                <th>City</th>
                <th>Distances</th>
                <th>Entry deadline</th>
                <th></th>
            </tr>
            @foreach (var race in Model)
            {
                <tr>
                    <td>@race.Date?.ToString("yyyy.MM.dd")</td>
                    <td>@race.Name</td>
                    <td>
                        @(race.TypeOfRace.HasValue ? EnumHelper<RaceType>.GetDisplayValue(race.TypeOfRace.Value) : "")
                    </td>
                    <td>
                        @race.CityString
                    </td>
                    <td>
                        @race.DistancesString
                    </td>
                    <td>@race.EntryDeadline?.ToString("yyyy.MM.dd HH:mm")</td>
                    <td>
                        <a asp-action="Details" class="btn btn-sm btn-primary" asp-route-id="@race.Id">View</a>
                        <a asp-action="Edit" class="btn btn-sm btn-outline-dark" asp-route-id="@race.Id">Edit</a>
                    </td>
                </tr>
            }
        </table>
    </div>
}
<a asp-action="Add" class="btn btn-primary btn-sm">+ New</a>
<a asp-action="Add" asp-controller="RaceResults" class="btn btn-primary btn-sm">+ Result</a>